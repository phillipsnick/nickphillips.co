# Managed by Chef for <%= node['hostname'] %>

Listen <%= node['phpmyadmin']['port'] %>
NameVirtualHost *:<%= node['phpmyadmin']['port'] %>

<VirtualHost *:<%= node['phpmyadmin']['port'] %>>
    ServerAdmin <%= node['apache']['contact'] %>

    ProxyPassMatch ^/(.*\.php(/.*)?)$ fcgi://127.0.0.1:9000/opt/phpmyadmin/$1

    DocumentRoot /opt/phpmyadmin
    <Directory /opt/phpmyadmin>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride All
        Require all granted
    </Directory>

    ErrorLog <%= node['apache']['log_dir'] %>/error-phpmyadmin.log

    LogLevel warn

    CustomLog <%= node['apache']['log_dir'] %>/access-phpmyadmin.log combined
    ServerSignature Off
</VirtualHost>